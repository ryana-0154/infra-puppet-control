---
# Node-specific configuration for vps.ra-home.co.uk

profile::base::manage_firewall: true
profile::base::manage_logrotate: true
profile::base::manage_otel_collector: true

# Monitoring configuration
profile::monitoring::manage_monitoring: true
profile::monitoring::monitoring_dir: '/opt/monitoring_test'
profile::monitoring::monitoring_ip: '10.10.10.1'  # Listen on all interfaces for VPS

# Service ports
profile::monitoring::prometheus_port: 9090
profile::monitoring::grafana_port: 3000
profile::monitoring::blackbox_port: 9115
profile::monitoring::pihole_exporter_port: 9617

# Enable/disable services
profile::monitoring::enable_prometheus: true
profile::monitoring::enable_grafana: true
profile::monitoring::enable_loki: true       # Log aggregation server
profile::monitoring::enable_promtail: true   # Log collection agent
profile::monitoring::enable_pihole_exporter: true  # Disable if no PiHole
profile::monitoring::enable_blackbox: true
profile::monitoring::enable_node_exporter: true
profile::monitoring::enable_wg_portal: true  # Disable if no WireGuard

# PiHole configuration (if enabled)
profile::monitoring::pihole_hostname: '10.10.10.1'
profile::monitoring::pihole_port: 80
profile::monitoring::pihole_protocol: 'http'
profile::monitoring::pihole_interval: '30s'

# Image versions (pin versions for stability in production)
profile::monitoring::prometheus_image: 'prom/prometheus:v2.45.0'
profile::monitoring::grafana_image: 'grafana/grafana:10.0.0'
profile::monitoring::loki_image: 'grafana/loki:3.1.1'
profile::monitoring::promtail_image: 'grafana/promtail:3.1.1'

profile::monitoring::grafana_admin_password: >
  ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEAhQEC0uzDiu6Hi40tYToJQw2cJ4iOY6afssakMfB74W6cTwBPbVCDbDvdZUdhT2rhhVhtbqH+AG6smHdkhM5TbrWNiyQkryYf9ajf7OEKgQh/QRZvnkIn7WgvKbApkZXrYcOz0Nk8N9kc0x9FxuZuY+bIKhGYYEUnTVqakeAwjzqr5FJsZpH4EEpa+012Tgvbbh0OPA+sGmjffc3IR8Sv/Nej5upn2ef/769nGl/LBSiLPgppjQatworDIkJ9/J1EzEsUeXL2Qo6KPUKruCAjBUAYXUdkdgSM+UQSJKN5B9Blm4BxQ5+wFOt+DQUhIKcAG7dEkfcPZHTkxMgae1MXjTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCOBM/lDdp39fRSSbgLslpVgBBG1Rx+O1AwP39C/Fh8JWDa]
profile::monitoring::pihole_password: >
  ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEAhQEC0uzDiu6Hi40tYToJQw2cJ4iOY6afssakMfB74W6cTwBPbVCDbDvdZUdhT2rhhVhtbqH+AG6smHdkhM5TbrWNiyQkryYf9ajf7OEKgQh/QRZvnkIn7WgvKbApkZXrYcOz0Nk8N9kc0x9FxuZuY+bIKhGYYEUnTVqakeAwjzqr5FJsZpH4EEpa+012Tgvbbh0OPA+sGmjffc3IR8Sv/Nej5upn2ef/769nGl/LBSiLPgppjQatworDIkJ9/J1EzEsUeXL2Qo6KPUKruCAjBUAYXUdkdgSM+UQSJKN5B9Blm4BxQ5+wFOt+DQUhIKcAG7dEkfcPZHTkxMgae1MXjTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCOBM/lDdp39fRSSbgLslpVgBBG1Rx+O1AwP39C/Fh8JWDa]
profile::monitoring::pihole_api_token: >
  ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEAHJkXaU42YmxEdl0cDYBJy22kSixoNZ8Hwd0uP1sJi+V+EWCrjCNinwFewyY+gJA8AbWuQRXDSNPS0dDzKcEvADQp/Ks7FRVJNPNNUHZmaWNnuvYc5vryGW27nA2yEQqDWVIWel5jztbftAvsl+wiFrNEtWyG0ABfJBe93xJJ76RdTRzEC83Jbh1GqPPwR9zwtiyo7lkQbvlPBtZOVs8QFjn5iSUMm8b0EJ+46RM1Nimf21xwEimiVz5AlY5KvNLNRuN7e6MZ5yOR2EGOo0MtoJlw3uGzGFzZWPNcAmhy1xKSLiyBnC1oXrljor6DhaAQNTOOucM415Ngv7u1vaRO+DA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCAOBKIdWr/NP8g84bvZ/twgBDP26jo8dQC67jLkDVca9kl]

# Enable SSO components (disabled by default)
profile::monitoring::enable_authelia: true
profile::monitoring::enable_nginx_proxy: true
profile::monitoring::enable_redis: true

# Domain configuration (required for SSO)
profile::monitoring::domain_name: 'vps.ra-home.co.uk'

profile::monitoring::authelia_jwt_secret: >
  ENC[PKCS7,MIIBuQYJKoZIhvcNAQcDoIIBqjCCAaYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEAPxyd4riyQiI29OWA7somWegxdo+0Wbdl5VeNvFI3RgNfYT/4bUJbVKzzbJsecL43pJm5wyQCDTCBeYVEBBQl8NOczHdjCPSeYQFRpjyZWfb1+ofAiy12Qz6RCTolzxpi7xKfKoSQDAK9cO7IY7MjwEY7dQOVXaxJsU2BedAmZUnmHvvXYZju3X0suprW+aqR4VEhzLv275Oe3oQk5hOsoOuA3Ubl8LTP7LiaHOTgLFMGInRjtTb4HoHqG5mtIaElfqTiiFKlCmAr7sd3fvM3hZFNogJI4F099d4w8JeDQGOJsFCl5O5H/3oBRi8K8SdgCz7zbZ+5yQM/mD+To9Wt7zB8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBeFZKriZVsyZ+WiiSylV1XgFD4tw7EjZ5i5T7qUQGRX2aWmksR2Ub2/42QrRnYP47vGtP2VKsiyG7/gXBqxVzJk7ffeqGYe7L0hAQD0PHNrbnGyZ17s4He633cHAcjy0Y91Q==]

profile::monitoring::authelia_session_secret: >
  ENC[PKCS7,MIIBuQYJKoZIhvcNAQcDoIIBqjCCAaYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEAqblrThGILD256gWjMikvc8QZMkW+rm8C9zLjFUp/DK2bh6s5lCH6Al+XoAlS9ObfNLDvR/R1PSC8OaM3mgEuKQxixZUbWHPBi4X+kdD+PccT0KObKCvuORKvrCGimHy6L5fYY7aRLdMVUoeOzG09SHS57rqqaFTSVNzX2hl/Of5bfu4LqtuvqFULbSVMbsfVbgYYNdRJFvdH+ZtFbaD9jAdnGDrUlo5B7L8CtZJug9O76hwf80ohWoCtMGqv3z/nYMR81daXF3OKnAnPX/NFH4SOv0WSNrNxSKpbndFdzMUidPuMy932IuTYr9MINg1JwgYfBQfhp1wCm5Qfz+3XRTB8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBPirggUIg+ymXrrhjv6YV3gFCMxDY98Oqfl3K1wQGfg3yGveTULNl2o+a1F0571bcXu4FAUB/sZJ3UMWs8LjYvw6+JZzoPmdZMTp5XiMR1F9ZA/geXxUIbo8URswJWB4V2sQ==]

profile::monitoring::authelia_storage_encryption_key: >
  ENC[PKCS7,MIIBuQYJKoZIhvcNAQcDoIIBqjCCAaYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEAPxyd4riyQiI29OWA7somWegxdo+0Wbdl5VeNvFI3RgNfYT/4bUJbVKzzbJsecL43pJm5wyQCDTCBeYVEBBQl8NOczHdjCPSeYQFRpjyZWfb1+ofAiy12Qz6RCTolzxpi7xKfKoSQDAK9cO7IY7MjwEY7dQOVXaxJsU2BedAmZUnmHvvXYZju3X0suprW+aqR4VEhzLv275Oe3oQk5hOsoOuA3Ubl8LTP7LiaHOTgLFMGInRjtTb4HoHqG5mtIaElfqTiiFKlCmAr7sd3fvM3hZFNogJI4F099d4w8JeDQGOJsFCl5O5H/3oBRi8K8SdgCz7zbZ+5yQM/mD+To9Wt7zB8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBeFZKriZVsyZ+WiiSylV1XgFD4tw7EjZ5i5T7qUQGRX2aWmksR2Ub2/42QrRnYP47vGtP2VKsiyG7/gXBqxVzJk7ffeqGYe7L0hAQD0PHNrbnGyZ17s4He633cHAcjy0Y91Q==]

profile::monitoring::grafana_oidc_secret: >
  ENC[PKCS7,MIIBuQYJKoZIhvcNAQcDoIIBqjCCAaYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEAyq0Z1h3/ziFKKXzrJsUmxw4QIVLMZwXw7nnBRxKJJ4DJ6hiQ+4hzxqzQY9FtiURLteIQvrePQXhKIv2MTRV1l1UMEk6rayFGVpc0d5P0iDWFrArc+mI8xa5LX1x26t3nMuz2DXe4DMTskitdPdgXI8xd91TSPrSCxpORZVWY3sOAsObRB8GbFBsp/fzQRNavyaWx10fq8zTZFwuOCXmthxqT41ualN+UXPG8mbZW38Wk2x1mL623nk1oUDl6eSqL8wajLR3DYwzE1NQRdQYsB0bdYzTjPFUrugHDKC41a8PgSNJ9Unb3gBMcGFtDq9h+5ff53TxtFNkbjmPJnd+MnjB8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCxZ0s2rCAAF8n9zAfm4/VfgFA0v5dlIPLtSk9ahlX++CQ7v/yCnYaByWj1X6ry149oCVxcI0TfEJjbnqcBXhpR2Y5s8UbR58XURs+e8usXjxGi5+1qDZgxlx1VJ+FghIvpeQ==]

profile::monitoring::oidc_private_key: >
  ENC[PKCS7,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]

# SSO Users with encrypted passwords
# Generate password hashes with:
# docker run authelia/authelia:4.38 authelia crypto hash generate argon2 --password 'your-password'
profile::monitoring::sso_users:
  ryan:
    displayname: "ryan"
    email: ENC[PKCS7,MIIBiQYJKoZIhvcNAQcDoIIBejCCAXYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEAN3UWovL06VBXM4xuWZoneDOQcUXKn4Os5Ox2l+KzO0YpeVzZ8pwLK5DWkBGkt5nyx6MIB4791zk7qjlThl4S7SfCNopmfpP9yxIiPt0T5RV4ElwMox8hXYCRSeyKty/OBlgQaxRMoKaAVQFMCbvAxrAG4apU3be9zB6fZXjALZ9UHRI/6izAapm2JnyOST1K153+Eb/D/sLwz60BNKF1OXM7EGwN+wiWT8Db0ZrTQQaw2j2VrS68/RzJp0QQxIMdcPfpo8IBmgR4dtwQB0Z1apNUWbKJeiO1GLA+fKuFsoy9sISR0fu69Qk4ZPZ0xzU9uY/074whG/yvS/QTOyTQdzBMBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBAiTt9HQvpyqD+gX2aulL6vgCAlRGb4v4gKJiCsSlYYv2K3LAGgldahCXUw/+N+/gFehg==]
    password: ENC[PKCS7,MIIB2gYJKoZIhvcNAQcDoIIByzCCAccCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEANipt56G5B2f45cnM+9bYUkqALpxJq9k4oKohyYJVAWcGOX3O7/h8aor38Br0zxxkpSbcnUycx/Z4s367tcWDZoTX8NgCA+XtC75/o1uX9FGOSW+FrgETvsBlC82UPA7H7jaGM2kgPwBtprVg+MNx/8NSAkgMmSGxc4oKv4E+l36u5gr9HWbLz6IN1J9Ha7ewToIrM38JxRimH9UNSlV//wYdRqhtq0fSxpn+G/9Zp/hn7S4GkQx++xQTU1mtha+I/p+yk4AGn439gO0VBCyEX7TYSaQIOiMltazTRaVyIBiJ9s3MiUUHJiHrsBhAGc9y7X8NSlkMk3yWvfqbQgTlaTCBnAYJKoZIhvcNAQcBMB0GCWCGSAFlAwQBKgQQahzOVCUI/jejDBeKoz4pKYBwP477vlRTbO/d5KA4N8qqHAHeUFANWhGNvo3+CMX9Ao+iGY+mhBCbS2ggXf6X2D4GwC49WKt00z7r90DGu9JA60XB4b6eIFSrTwLQQZobCrfWQ8ysGKkNsmEpoC5qFMT3iv+lGFmf4TC++NCCS/XEpA==]
    groups:
      - admins

# OpenTelemetry Collector for Claude Code monitoring
manage_otel_collector: true
profile::otel_collector::manage_otel_collector: true
profile::otel_collector::otel_dir: '/opt/otel'
profile::otel_collector::otel_grpc_port: 4317
profile::otel_collector::otel_http_port: 4318
profile::otel_collector::otel_prometheus_port: 8889
profile::otel_collector::enable_grafana_dashboards: true
profile::otel_collector::otel_collector_image: 'otel/opentelemetry-collector-contrib:0.91.0'

# Firewall configuration for VPS
profile::firewall::ssh_source:
  - '0.0.0.0/0'  # Allow SSH from anywhere (consider restricting to your IP ranges)
profile::firewall::ssh_port: ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEADK1MNVCcoO7uMEuEJ929Z99H5a7Uk33oq6oJeGHY7wPqPIXiTWc8+9OYycZJ8o9jwO7rgByPgVa9hPLqyJy14iZsqD6yrdQg7oMu6/TdRR7Drijzwj3gCisD1MM5KqirKkjRQDoYwDIktQZsyFWGapEHT8GH9Z+NjtPRc+JnSPDYzZw5U6xetabpr2hzeWQxK9CFO3j5nISuBS7HCEI7RavHyqGBfYg2o0XYjSEhK/o7IZEasNTPezH8j11iUuwNBoVNKdv2MtP+VD9xLvjVPIEk1pKNIIlYI38szUWwEsPf/w4zrRcDgo5mI5HmLktO+/77ZUqQobccLWi3fAjypTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCDQGleTWNzrKusDA8unOEsgBBMTOSgimO1W9INOd+tiuED]
profile::firewall::allow_ping: false

# Firewall management (controlled by profile::base::manage_firewall in common.yaml)

# WireGuard VPN configuration
profile::firewall::wireguard_port: 51820
profile::firewall::wireguard_network: '10.10.10.0/24'
profile::firewall::wireguard_interface: 'wg0'
profile::firewall::allow_wireguard_routing: true

# OTEL Collector firewall rules (WireGuard access only)
profile::firewall::custom_rules:
  otel_grpc:
    port: 4317
    proto: tcp
    source: '10.10.10.0/24'
    jump: accept
  otel_http:
    port: 4318
    proto: tcp
    source: '10.10.10.0/24'
    jump: accept
  otel_prometheus:
    port: 8889
    proto: tcp
    source: '10.10.10.0/24'
    jump: accept

profile::monitoring::enable_external_dashboards: true
profile::monitoring::dashboard_repo_url: 'https://github.com/ryana-0154/infra-grafana-dashboards.git'
profile::monitoring::dashboard_repo_revision: 'main'
profile::monitoring::dashboard_auto_update: true
profile::monitoring::enable_embedded_dashboards: true
