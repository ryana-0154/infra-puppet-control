---
# Node-specific configuration for vps.ra-home.co.uk

# Monitoring configuration
profile::monitoring::manage_monitoring: true
profile::monitoring::monitoring_dir: '/opt/monitoring_test'
profile::monitoring::monitoring_ip: '0.0.0.0'  # Listen on all interfaces for VPS

# Enable only lightweight services on VPS
profile::monitoring::enable_prometheus: true
profile::monitoring::enable_grafana: false      # Too resource intensive
profile::monitoring::enable_loki: false         # Too resource intensive
profile::monitoring::enable_promtail: true
profile::monitoring::enable_pihole_exporter: false
profile::monitoring::enable_blackbox: true
profile::monitoring::enable_node_exporter: true
profile::monitoring::enable_wg_portal: false

# Use specific versions for stability
profile::monitoring::prometheus_image: 'prom/prometheus:v2.45.0'
profile::monitoring::promtail_image: 'grafana/promtail:3.1.1'
profile::monitoring::blackbox_image: 'prom/blackbox-exporter:v0.24.0'
profile::monitoring::node_exporter_image: 'quay.io/prometheus/node-exporter:v1.6.0'

# Firewall configuration for VPS
profile::firewall::ssh_source:
  - '0.0.0.0/0'  # Allow SSH from anywhere (consider restricting to your IP ranges)
profile::firewall::ssh_port: ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQAwDQYJKoZIhvcNAQEBBQAEggEADK1MNVCcoO7uMEuEJ929Z99H5a7Uk33oq6oJeGHY7wPqPIXiTWc8+9OYycZJ8o9jwO7rgByPgVa9hPLqyJy14iZsqD6yrdQg7oMu6/TdRR7Drijzwj3gCisD1MM5KqirKkjRQDoYwDIktQZsyFWGapEHT8GH9Z+NjtPRc+JnSPDYzZw5U6xetabpr2hzeWQxK9CFO3j5nISuBS7HCEI7RavHyqGBfYg2o0XYjSEhK/o7IZEasNTPezH8j11iUuwNBoVNKdv2MtP+VD9xLvjVPIEk1pKNIIlYI38szUWwEsPf/w4zrRcDgo5mI5HmLktO+/77ZUqQobccLWi3fAjypTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCDQGleTWNzrKusDA8unOEsgBBMTOSgimO1W9INOd+tiuED]
profile::firewall::allow_ping: false

# Firewall management
profile::firewall::manage_firewall: true

# WireGuard VPN configuration
profile::firewall::wireguard_port: 51820
profile::firewall::wireguard_network: '10.10.10.0/24'
profile::firewall::wireguard_interface: 'wg0'
profile::firewall::allow_wireguard_routing: true
